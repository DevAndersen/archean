@page "/worlds"
@using Archean.Core.Models.Worlds
@using Archean.Core.Services.Worlds
@inject IWorldRegistry WorldRegistry

<PageTitle>Worlds - Archean</PageTitle>

<InterfacePanel Title="Worlds">
    <Controls>
        <button class="button-green" @onclick="@(() => ShowCreateNewDialog = true)">Create world</button>
    </Controls>
    <ChildContent>
        <ScrollableInterfaceIndentation>
            @foreach (IWorld world in WorldRegistry.GetWorlds())
            {
                <div class="interface" style="display: flex; flex-direction: row; align-items: center">
                    <div class="interface-text">@world.Name</div>
                    <div class="interface-text">@(world.IsLoaded ? "Loaded" : "Unloaded")</div>
                    <div class="interface-text">@world.Players.Count players</div>
                    <div style="margin-left: auto">
                        <button>Details</button>
                        <button class="button-red">Unload</button>
                    </div>
                </div>
            }
        </ScrollableInterfaceIndentation>
    </ChildContent>
</InterfacePanel>

<Dialog Title="Create new world" IsOpen="ShowCreateNewDialog">
    <div style="display: grid; grid-auto-flow: column; grid-auto-columns: 1fr; gap: var(--spacing)">
        <button class="button-green" @onclick="@(() => ShowCreateNewDialog = false)">Create</button>
        <button class="button-red" @onclick="@(() => ShowCreateNewDialog = false)">Cancel</button>
    </div>
</Dialog>

@code
{
    public bool ShowCreateNewDialog { get; set; }
}
